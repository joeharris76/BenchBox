# Databricks TPC-DS Tuned Configuration
# This configuration enables all Databricks-supported optimizations for TPC-DS benchmark
# Includes Delta Lake features, Z-ordering, auto-optimize, and all constraint types

primary_keys:
  enabled: true
  enforce_uniqueness: true
  nullable: false

foreign_keys:
  enabled: true
  enforce_referential_integrity: true
  on_delete_action: CASCADE
  on_update_action: RESTRICT

unique_constraints:
  enabled: true
  ignore_nulls: false

check_constraints:
  enabled: true
  enforce_on_insert: true
  enforce_on_update: true

platform_optimizations:
  z_ordering_enabled: true
  z_ordering_columns:
  - SS_SOLD_DATE_SK
  - SS_ITEM_SK
  - CS_SOLD_DATE_SK
  - CS_ITEM_SK
  - WS_SOLD_DATE_SK
  - WS_ITEM_SK
  auto_optimize_enabled: true
  auto_compact_enabled: true
  materialized_views_enabled: true

table_tunings:
  STORE_SALES:
    table_name: STORE_SALES
    partitioning:
    - name: SS_SOLD_DATE_SK
      type: INTEGER
      order: 1
    clustering:
    - name: SS_ITEM_SK
      type: INTEGER
      order: 1
    - name: SS_CUSTOMER_SK
      type: INTEGER
      order: 2
    distribution:
    - name: SS_ITEM_SK
      type: INTEGER
      order: 1

  STORE_RETURNS:
    table_name: STORE_RETURNS
    partitioning:
    - name: SR_RETURNED_DATE_SK
      type: INTEGER
      order: 1
    clustering:
    - name: SR_ITEM_SK
      type: INTEGER
      order: 1
    distribution:
    - name: SR_ITEM_SK
      type: INTEGER
      order: 1

  CATALOG_SALES:
    table_name: CATALOG_SALES
    partitioning:
    - name: CS_SOLD_DATE_SK
      type: INTEGER
      order: 1
    clustering:
    - name: CS_ITEM_SK
      type: INTEGER
      order: 1
    distribution:
    - name: CS_ITEM_SK
      type: INTEGER
      order: 1

  CATALOG_RETURNS:
    table_name: CATALOG_RETURNS
    partitioning:
    - name: CR_RETURNED_DATE_SK
      type: INTEGER
      order: 1
    clustering:
    - name: CR_ITEM_SK
      type: INTEGER
      order: 1
    distribution:
    - name: CR_ITEM_SK
      type: INTEGER
      order: 1

  WEB_SALES:
    table_name: WEB_SALES
    partitioning:
    - name: WS_SOLD_DATE_SK
      type: INTEGER
      order: 1
    clustering:
    - name: WS_ITEM_SK
      type: INTEGER
      order: 1
    distribution:
    - name: WS_ITEM_SK
      type: INTEGER
      order: 1

  WEB_RETURNS:
    table_name: WEB_RETURNS
    partitioning:
    - name: WR_RETURNED_DATE_SK
      type: INTEGER
      order: 1
    clustering:
    - name: WR_ITEM_SK
      type: INTEGER
      order: 1
    distribution:
    - name: WR_ITEM_SK
      type: INTEGER
      order: 1

  DATE_DIM:
    table_name: DATE_DIM
    clustering:
    - name: D_DATE_SK
      type: INTEGER
      order: 1
    distribution:
    - name: D_DATE_SK
      type: INTEGER
      order: 1

  ITEM:
    table_name: ITEM
    clustering:
    - name: I_ITEM_SK
      type: INTEGER
      order: 1
    distribution:
    - name: I_ITEM_SK
      type: INTEGER
      order: 1

  CUSTOMER:
    table_name: CUSTOMER
    clustering:
    - name: C_CUSTOMER_SK
      type: INTEGER
      order: 1
    distribution:
    - name: C_CUSTOMER_SK
      type: INTEGER
      order: 1

_metadata:
  version: '2.0'
  format: unified_tuning
  database: databricks
  benchmark: tpcds
  configuration_type: tuned
  description: "Databricks TPC-DS configuration with Delta Lake optimizations, Z-ordering, and auto-optimize"
  created: '2025-11-01'
  generated_by: benchbox-project
